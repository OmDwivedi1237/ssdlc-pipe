(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{969:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var a=s(5155),r=s(2115),l=s(5489),n=s(2839);let i=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60,t=[],s=Date.now();try{for await(let a of n.F.streamVision(!0)){if(Date.now()-s>1e3*e)break;a.data&&a.data.text?t.push(a.data.text):console.warn("Received event without OCR text:",a)}return t.join("\n")}catch(e){throw console.error("Failed to capture screen data:",e),Error("Screen capture failed")}};var o=s(7456),d=s(8060);let c=()=>{let[e,t]=(0,r.useState)(!1),[s,n]=(0,r.useState)(!1),[c,x]=(0,r.useState)(null),m=async()=>{t(!0),n(!0);try{let e=await i(60);if(!e||0===e.length){console.error("Captured data is empty"),n(!1);return}let t=await l.A.post("/api/risk-analysis",{eventData:e});t.data&&t.data.analysis?x(t.data.analysis):console.error("Error: Analysis result is missing in response.")}catch(e){console.error("Error capturing or analyzing data:",e),n(!1)}t(!1)};return(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("button",{onClick:m,disabled:e,className:"p-4 bg-black text-white rounded-full transition duration-300 hover:bg-white hover:text-black w-full sm:w-auto mb-4",children:e?"Capturing...":"Start Screenpipe"}),s&&(0,a.jsx)("div",{className:"bg-gray-800 p-4 rounded-lg shadow-lg mb-6",children:(0,a.jsx)("p",{className:"text-lg text-gray-400 text-center",children:"Analyzing your data..."})}),c&&(0,a.jsxs)("div",{className:"mt-6 bg-gray-800 p-6 rounded-lg shadow-lg w-full sm:w-96",children:[(0,a.jsx)("h2",{className:"font-semibold text-xl text-indigo-200 mb-4",children:"Risk Analysis Report"}),(0,a.jsx)("div",{className:"markdown-content text-sm text-white",children:(0,a.jsx)(o.oz,{remarkPlugins:[d.A],children:c})})]})]})},x=e=>{let{analysis:t}=e;return(0,a.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg mb-6 text-white",children:[(0,a.jsx)("h3",{className:"text-2xl font-semibold text-indigo-300 mb-4",children:"Risk Analysis Report"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-lg font-medium",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-300",children:"File: "})," ",t.fileName]}),(0,a.jsxs)("p",{className:"text-lg font-medium",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-300",children:"Timestamp: "})," ",t.timestamp]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-lg font-medium",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-300",children:"Risk Level: "})," ",t.riskLevel]}),(0,a.jsxs)("p",{className:"text-lg font-medium text-red-400",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-300",children:"Risk: "})," ",t.riskDescription]})]})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)("p",{className:"text-lg",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-300",children:"Reasoning: "})," ",t.reasoning]})})]})};function m(){let[e,t]=(0,r.useState)(null),[s,n]=(0,r.useState)(!1),i=async()=>{n(!0);try{let e=await l.A.get("/api/screenpipe");t(e.data)}catch(e){console.error("Error generating report:",e)}finally{n(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-900 p-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto bg-gradient-to-r from-gray-800 via-gray-900 to-black p-6 rounded-lg shadow-xl",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-center text-indigo-200 mb-8",children:"Risk Monitoring Dashboard"}),(0,a.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-md mb-8 text-white",children:[(0,a.jsx)(c,{}),"  ",(0,a.jsx)("button",{onClick:i,className:"bg-black text-white p-3 rounded-full mt-6 w-full sm:w-auto transition duration-300 hover:bg-white hover:text-black",children:s?"Generating Report...":"Generate Risk Report"})]}),s&&(0,a.jsx)("div",{className:"bg-gray-800 p-4 rounded-lg shadow-lg mb-6",children:(0,a.jsx)("p",{className:"text-lg text-center text-gray-400",children:"Generating your report, please wait..."})}),e&&!s&&(0,a.jsx)(x,{analysis:e})]})})}},7805:(e,t,s)=>{Promise.resolve().then(s.bind(s,969))}},e=>{var t=t=>e(e.s=t);e.O(0,[78,631,441,684,358],()=>t(7805)),_N_E=e.O()}]);